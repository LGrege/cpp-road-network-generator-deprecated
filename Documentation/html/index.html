<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RoadGenLSystems: Road generation based on L-Systems</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Unbenannt.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">RoadGenLSystems
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Road generation based on L-Systems </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="intro_sec"></a>
Introduction</h1>
<p>The road generator was created as part of a bachelor thesis at the TU-Graz. Its main goal was to create a visually appealing road system, which will later be used in combinations with shape grammars (procedural modeling) to generate a complete city from scratch.</p>
<p>The system has to be able to generate a visually appealing city map, containing rivers as well as green-spaces and parking lots next to the lots for the city-blocks itself. The generated result is configurable by the user in an easy way, so that a lot of different street patterns can be computed without greater foreknowledge. This is done by providing the input files to the programm at creation (See "all_parm.txt" as well as "all_points.txt")</p>
<p>To create unique looking maps with an easily understandable underlying model, L-Systems were used. The L-System used a linked-list of non-terminal symbols, which were imple- mented using different classes for each symbol. Instances of the classes will replace them- selves in the list, until every instance has terminated. Non-terminal symbols are:</p>
<ul>
<li><a class="el" href="class_n_t_start.html" title="Start point of the overall creation. ">NTStart</a></li>
<li><a class="el" href="class_n_t_highway.html" title="Start for the highway creation. ">NTHighway</a></li>
<li><a class="el" href="class_n_t_highway_segment.html" title="Smallest unit of highway. ">NTHighwaySegment</a></li>
<li><a class="el" href="class_n_t_street.html" title="Smalles unit of street. ">NTStreet</a></li>
</ul>
<p>Before creating any of the roads, rivers are created. The amount of rivers used in the map can be configured by the user. Rivers grow from one (random) side of the map to the other. After doing so, the algorithm first creates a set of highways, which serve as anchor points for the generation of smaller roads. During creation, two set of rules are used in order to create visually appealing networks, which can be split in global and local rules.</p>
<h2><a class="anchor" id="Global"></a>
Global</h2>
<p>The global rules only apply to the creation of highway segments. These major traffic aortae are used as branching point for smaller street segments. In order to gain some visual control over the network generation, the user is able to place n-start points, from which highway segments will start growing towards m-target points. Each start point is represented by one member of the <a class="el" href="class_n_t_highway.html" title="Start for the highway creation. ">NTHighway</a> class, which will create m-HighwaySegments, growing towards every of the goal points (segments terminate at collision or if the goal is reached). Every time a highway segment replaces itself with a new segment, a direct segment towards the goal is calculated (fixed length). After doing so a random offset is added, in order to make the creation look less linear.</p>
<div class="image">
<img src="HighwayGen.png" alt="HighwayGen.png"/>
</div>
<p>Another characteristic of the highways is, that they are able to create bridges spanning rivers. Before a highway segment grows towards the goal, it is first checked if any river would inter- fere with the new segment and if so where. The algorithm then tries to get the other riverbank by extruding the conflict segment. If the two points could be acquired, a bridge can be con- structed between them. The old segment is only produced up to the first conflict point, while on the other side of the river a new highway-segment is created and inserted into the list.</p>
<p>After the last highway has finished (either by reaching the goal or by intersecting another highway segment), branching of the streets starts. Not waiting for the highways to terminate might otherwise lead to streets getting in the way of new highways, which would stop them mid-creation.</p>
<h2><a class="anchor" id="Local"></a>
Local</h2>
<p>Every time a highway segment grows outwards, it has a (user selected) possibility to create a new street branch (branching-probability). Streets grow towards random locations, only keeping the angle relative to the previous street segment in mind (do not want too steep angles, should look natural). If the new segment is calculated, a check for intersections is necessary (when found, terminate the segment at the collision).</p>
<h2><a class="anchor" id="Lots"></a>
Lots</h2>
<p>The road network keeps growing until every element in the list has terminated. The created segments are stored in corresponding containers. Until now only segments were created, but as the lot creation algorithm needs polygons to work with, they had to be calculated by using the given segments as well as <b>CPSGs</b> <b>2D-Arrangement</b> functionality.</p>
<div class="image">
<img src="StreetGenFin1.png" alt="StreetGenFin1.png"/>
</div>
<p>By doing so polygons were created without any margin between them for the streets. This problem was solved by using the <b>CLIPPER-Library</b> to shrink the given polygons evenly.</p>
<p><br />
 </p>
<h1><a class="anchor" id="install_sec"></a>
Installation</h1>
<h2><a class="anchor" id="windows"></a>
Windows</h2>
<ul>
<li>Download source from <a href="https://github.com/LGrege/RoadNetworkGenerator">https://github.com/LGrege/RoadNetworkGenerator</a></li>
<li>Install CMAKE from <a href="https://cmake.org/download/">https://cmake.org/download/</a></li>
<li>Follow the instructions under <a href="http://www.cgal.org/download/windows.html">http://www.cgal.org/download/windows.html</a> to install CGAL</li>
<li>Use CMAKE to generate the Visual Studio project <br />
 <div class="image">
<img src="Setup1.png" alt="Setup1.png"/>
</div>
</li>
<li>Open the project in visual studio and build it using the release settings <br />
 <div class="image">
<img src="Setup2.png" alt="Setup2.png"/>
</div>
</li>
<li>After building is done, a main.exe file is created under the Release folder</li>
</ul>
<h1><a class="anchor" id="usage_sec"></a>
Usage</h1>
<p>The previously created executable expects two files as input, which have to be placed in the same directory as the file. These files are a config file as well as a input file (both .txt).</p>
<h2><a class="anchor" id="config_file"></a>
Config</h2>
<p>The name of the config file has to be "all_parms.txt". Example config file:</p>
<div class="fragment"><div class="line">DAY-1</div><div class="line">BP-87</div><div class="line">LP-33</div><div class="line">RC-1</div><div class="line">MS-8000</div><div class="line">DIM-600x800</div></div><!-- fragment --><p>The input values are:</p><ul>
<li>DAY -&gt; Sets a flag in the output files later used for building creation (not relevant for road creation)</li>
<li>BP -&gt; Branch Probability, defines probability that street segment creates new branch. If higher, road network gets finer (lesser big lots)</li>
<li>LP -&gt; Lighting Probability, based on this parameter the amount of lights placed on the map can be manipulated</li>
<li>RC -&gt; River Count, Number of rivers to be created</li>
<li>MS -&gt; Max Segment, Maximum number of segments after which creation terminates. If dimension is increased, this value has to be increased also.</li>
<li>DIM -&gt; Dimension of the Map</li>
</ul>
<p>Inputs that are not set are set by default with the values shown in the above configuration.</p>
<h2><a class="anchor" id="input_file"></a>
Input</h2>
<p>The name of the input file has to be "all_points.txt" and has to look as follows:</p>
<div class="fragment"><div class="line">L-87-124</div><div class="line">R-312-115</div><div class="line">L-639-99</div><div class="line">R-45-435</div><div class="line">L-393-359</div><div class="line">R-704-357</div></div><!-- fragment --><p>The "L"-Points define start points from which the road highways start to grow towards the "R"-Points (End points). An arbitrary amount of start and end points can be created, shaping the way the road network will look.</p>
<h1><a class="anchor" id="generated_output"></a>
Output</h1>
<p>The resulting lots as well as rivers are exported to a generated folder, containing subfolders for the corresponding entities. Depending on the type of object exported, they are either JSON or .txt files (later needed for another project).</p>
<p>Also two postscript files are created in the root directory, displaying the road network itself ("out.ps") as well as the generated lot-polygons of the city blocks ("poly.ps")</p>
<p><br />
 </p>
<h1><a class="anchor" id="ack_sec"></a>
Acknowledgments</h1>
<ul>
<li>Clipper library was used for shrinking the polygons <a href="http://www.angusj.com/delphi/clipper.php">http://www.angusj.com/delphi/clipper.php</a></li>
<li>CGAL was used throughout the whole project <a href="http://www.cgal.org/">http://www.cgal.org/</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
